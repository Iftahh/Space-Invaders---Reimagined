(function(){function bb(){if(0!=Ka.length){var a=Ka.shift(),b=a[1];G.getElementById("text").textContent=a[0];La+=b;G.getElementById("pbar-in").style.width=2*La+"px";a[2]();setTimeout(bb,0)}}function cb(a){var b=aa(3.5,(a-Ma)/32);Ma=a;a=(ka/3|0)%la;var c=H[32]?1.65:.6;H[37]||H[65]||H[83]?(d.b.x=Z(-10,d.b.x-c),d.I=!0):H[39]||H[68]||H[70]?(d.b.x=aa(10,d.b.x+c),d.I=!1):d.I=d.g>ba/2||d.g<-ba/2;!d.K&&d.U&&(d.b.x+=db(1.5,d.b.x,.02));ma.j=H[32];c=d.a.y<B;d.b.scale(c?.99:.76);d.b.y=U(-10,20,d.b.y+(H[32]?-.25:
d.K?.8:.5));d.a.add(Na(d.b,b));d.a.y>B&&(c&&(s[s.length*(1-g/2/g)|0].d=22*d.b.y,console.log("wave "+22*d.b.y),P.j=!0,P.position.x=d.a.x,P.position.y=d.a.y+h-8,P.speed=.75*d.b.y,P.k=20*v(d.b.y)),d.a.y>B+.5*q&&(d.a.y=0));d.a.x>Oa+g&&(d.a.x=-g);d.a.x<-g&&(d.a.x=Oa+g);a:{var c=Ba(d.a.x/e|0,(d.a.y-.4*h)/e|0),f=!1,p=!1,I=!1,m=0,t=0;d.U=c==ca||c==Pa||1==c;0<d.b.x&&(m=h/4,t=-d.a.x%e);0>d.b.x&&(m=h/-4,t=-d.a.x%e+e);Ca((d.a.x+m)/e|0,(d.a.y-.8*h)/e|0)&&(p=!0,Ca((d.a.x+m)/e|0,(d.a.y-.6*h)/e|0)&&(f=!0));Ca((d.a.x+
m)/e|0,(d.a.y+2*e)/e|0)&&(I=!0,Ca((d.a.x+m)/e|0,d.a.y/e|0)&&(f=!0));if(I||p)if(f&&(d.b.x*=-.3,d.a.x+=t),.2>v(d.b.y)?d.b.y=0:d.b.y*=0<d.b.y&&I||0>d.b.y&&p?-.3:.3,p&&(d.a.y+=e-d.a.y%e,f||(d.a.y+=e),d.b.x*=.2),I){d.a.y-=d.a.y%e;f&&(d.a.y-=e);d.K=!0;eb=0;break a}6<eb++&&(d.K=!1)}d.K&&(.3>v(d.b.x)?d.b.x=0:d.b.x*=.8);Qa.position.x=d.a.x;F=d.a.y-q/2|0;J=d.a.x-g/2|0;u.setTransform(1,0,0,1,-J,-F);w.setTransform(1,0,0,1,-J,-F);Ra.setTransform(1,0,0,1,-J,-F);ma.position.x=d.a.x-(d.I?5:15);ma.position.y=d.a.y-
25;Cb(b);ma.update(b);Da.update(b);P.update(b);Qa.update(b);u.clearRect(J,F,g,q);Ra.clearRect(J,F,g,q);w.clearRect(J,F,g,q);w.save();w.globalCompositeOperation="lighter";ma.L(w);w.restore();Da.L(w);Qa.L(Ra);Ea&&(d.g=Math.atan2(F+fb-d.a.y,J+gb-d.a.x),c=d.a,f=d.g,p=Ea,w.save(),w.translate(c.x-h/2,c.y-h),d.I&&(w.translate(h,0),w.scale(-1,1),f=ba-f),w.drawImage(p,0,0,h,h,0,0,h,h),w.translate(h/3+h/9,h/3),w.rotate(f),w.drawImage(p,h,0,h,h,-h/3,-h/3,h,h),w.restore());u.save();P.L(u);u.restore();hb!=a&&
(u.fillStyle=na[a],hb=a);Db();B-=.01*b;B<Sa-1E3&&(B=Sa-10);1E7>Q&&(oa[$].clearRect(Q-da,V-ea,pa-Q-2,qa-V-2),fa(oa[$],Q,V,Q-da-1,V-ea-1,pa-Q,qa-V),Q=V=1E7,pa=qa=-1E7);var p=d.a.x,r=d.a.y,p=p-K/2,r=r-L/2,I=oa[$],b=p-da;a=r-ea;c=v(b);f=v(a);if(c||f){if(c>K||f>L)da=p,ea=r,fa(I,p,r,0,0,K,L);else if(200<c||200<f){da=p;ea=r;var l,C,M,Ta,I=0;0>b?(l=c,C=0):(l=0,C=c);0>a?(M=f,Ta=0):(Ta=f,M=0);var k=K-c,n=L-f,m=1-$,t=oa[m];t.clearRect(0,0,K,L);t.drawImage(Ua[$],C,Ta,k,n,l,M,k,n);0>a?(fa(t,p,r,0,0,K,f),I=f,r+=
f):fa(t,p,r+L-f,0,L-f,K,f);0>b?fa(t,p,r,0,I,c,L-f):(p+=K-c,fa(t,p,r,K-c,I,c,L-f));$=m;b=a=0}W.clearRect(0,0,g,q);W.drawImage(Ua[$],200+b,200+a,g,q,0,0,g,q)}Fa(cb);ka++}function db(a,b,c){a-=b;return U(-10,10,v(a)*a*c)}function ib(){return 1.5}function Eb(a){return Va(g,q,function(b){var c=new Int8Array(g*q),f=new Int8Array(g*q),p=0;X(g,q,function(b,m){c[p]=ga(5*(b-g/2)/(3*m/q+.6)+5*z(a+x*(b+2*m)/g)+3*z(a+2*x*(b+m)/g));f[p]=ga(5*(2*m/q+.6)*z(a+4*x*(b+m/2)/g)*z(a+3.5*x*(b+m)/g));p++});Fb(c,f,N,b,g,
q)})}function ha(){if(!N){N=[];for(var a=0,b=0;b<q;b++)for(var c=k(5,25)|0,f=k(10,35)|0,p=k(20,40)|0,d=0;d<g;d++){var m=k(25,50)|0,t=k(30,65)|0,r=k(70,120)|0;N[a++]=20+(m+c>>1)+ga(5*z(b*x/10));N[a++]=25+(t+f>>1)+ga(5*z(b*x/12));N[a++]=30+(r+p>>1)+ga(8*z(b*x/13));N[a++]=255;c=m;f=t;p=r}a=[];jb({data:N,width:g,height:q},a,[.1,.1,.1,.1,.2,.1,.1,.1,.1]);N=a}na.push(u.createPattern(Eb(na.length*x/la),"repeat"))}function Db(){if(!(F+2*q<B)){u.translate(J,0);u.beginPath();u.moveTo(g,F+q);u.lineTo(0,F+q);
var a=0;ra(s,function(b){u.lineTo(a,b.height+3*z((a-5.25*ka)/322*x+4*z((a-3*ka)/511*x)+4*z((a-1.5*ka)/733*x)));a+=kb});u.closePath();u.fill();u.stroke()}}function Cb(a){var b=0;ra(s,function(f){f.d+=a*(-.04*(f.height-B)-.025*f.d);f.height+=f.d*a;b=Z(b,v(f.d))});if(1<b){var c=[],f=[];D(lb,function(){for(var a=0;a<s.length;a++)0<a&&(c[a]=.25*(s[a].height-s[a-1].height),s[a-1].d+=c[a]),a<s.length-1&&(f[a]=.25*(s[a].height-s[a+1].height),s[a+1].d+=f[a]);for(a=0;a<s.length;a++)0<a&&(s[a-1].height+=c[a]),
a<s.length-1&&(s[a+1].height+=f[a])})}}function Ca(a,b){var c=Ba(a,b);return c==sa||c==Wa||c==ta}function mb(a,b){var c=nb[Ba(a,b)];return void 0===c?Gb:c}function Ba(a,b){return 0>b?ca:0>a?b>=1E3-.4*a?sa:ca:2048<=a?b>=1E3+.4*(a-2048)?sa:ca:1E3<=b?sa:Ga[2048*b+a]}function ob(a,b,c){Ga[2048*b+a]=c;a*=e;b*=e;Q=aa(Q,a-2*e);V=aa(V,b-2*e);pa=Z(pa,a+2*e);qa=Z(qa,b+2*e)}function fa(a,b,c,f,p,d,m){var t=d/e|0,r=m/e|0,l=b/e|0;b=c/e|0;var C=da;c=ea;a.save();a.translate(-C,-c);a.rect(C+f,c+p,d,m);a.clip();f-=
e;f-=f%e;p-=e;p-=p%e;for(var t=t+4,r=r+2,C=C+f,M=c+p,g=b;g<b+r;g++){var h=mb(l,g),k=0;D(t,function(b){var f=mb(l+b,g);if(f!=h||b>=t-1){if(h){a.fillStyle=h;a.beginPath();a.moveTo(C+k*e+R[v(11*k+3*g)%80],M+R[v(9*k+7*g)%80]);for(var c=k+1;c<=b;c++)a.lineTo(C+c*e+R[v(11*c+3*g)%80],M+R[v(9*c+7*g)%80]);c--;for(a.lineTo(C+c*e+R[v(11*c+3*(g+1))%80],1+M+e+R[v(9*c+7*(g+1))%80]);c>=k;c--)a.lineTo(C+c*e+R[v(11*c+3*(g+1))%80],1+M+e+R[v(9*c+7*(g+1))%80]);a.closePath();a.fill()}k=b}h=f});M+=e}a.restore()}function ua(a,
b,c){return Va(l,l,function(f){var p=0;X(l,l,function(d,m){f[p++]=a(d,m);f[p++]=b(d,m);f[p++]=c(d,m);f[p++]=255})})}function Hb(){return function(a){var b=aa(a.q,.4);return va((b+.08)/2,(a.t+.31)/2,(a.b+.16)/2)}}function pb(a){H[a.keyCode]="keydown"==a.type;(32==a.keyCode||37<=a.keyCode&&40>=a.ha)&&a.preventDefault()}function Ha(a,b){var c={w:0,Q:0,u:0,v:.3,S:function(){},ca:function(a,b){this.V({R:a,r:[],T:[],j:!0,s:n(12,12),p:n(0,.3),elapsedTime:0,duration:-1,k:0,l:0,l:0});this.V(b||{})},V:function(a){for(var b in a)this[b]=
a[b];this.i||(this.i=this.size);this.k||(this.k=this.R/this.A)},G:function(a,b){if(this.r.length==this.R)return null;var c=this.T.shift()||Ib();this.da(c,a,b);this.r.push(c);return c},da:function(a,b,c){a.position.x=b+this.s.x*k(-1,1);a.position.y=c+this.s.y*k(-1,1);b=(this.g+this.H*k(-1,1))*(ba/180);b=n(Math.cos(b),z(b));c=this.speed+this.N*k(-1,1);a.direction=Na(b,c);a.size=this.size+this.B*k(-1,1);a.size=1>=a.size?1:a.size|0;a.i=this.i+this.B*k(-1,1);a.c=this.A+this.J*k(-1,1);a.e=this.e+this.M*
k(-1,1);a.e=100<a.e?100:0>a.e?0:a.e;a.X=a.size/200*a.e|0;b=[this.n[0]+this.o[0]*k(-1,1),this.n[1]+this.o[1]*k(-1,1),this.n[2]+this.o[2]*k(-1,1),this.n[3]+this.o[3]*k(-1,1)];this.h&&(c=[this.h[0]+this.m[0]*k(-1,1),this.h[1]+this.m[1]*k(-1,1),this.h[2]+this.m[2]*k(-1,1),this.h[3]+this.m[3]*k(-1,1)],a.f[0]=(c[0]-b[0])/a.c,a.f[1]=(c[1]-b[1])/a.c,a.f[2]=(c[2]-b[2])/a.c,a.f[3]=(c[3]-b[3])/a.c);a.color=b;a.Z=(a.i-a.size)/a.c},update:function(a){a/=31;if(this.j&&0<this.k){var b=1/this.k;for(this.l+=a;this.r.length<
this.R&&this.l>b;)this.G(this.position.x,this.position.y),this.l-=b;-1!=this.duration&&(this.elapsedTime+=a,this.duration<this.elapsedTime&&this.ga())}var c=this;ra(this.r,function(b,d){if(0<b.c){c.p&&(b.direction=qb(b.direction,c.p));c.u&&(b.direction.x+=db(c.u(b),b.direction.x,c.v));if(c.Q)for(var p=0;p<c.Q.length;p++){var e=c.Q[p],g=b.position,l=e[1];b.direction=qb(b.direction,Na(n(g.x-l.x,g.y-l.y),e[0]))}b.position.add(b.direction);b.c-=a;c.S(b)}0<b.c?(b.size+=b.Z*a,b.X=b.size/200*b.e|0,b.f&&
(b.color[0]+=b.f[0]*a,b.color[1]+=b.f[1]*a,b.color[2]+=b.f[2]*a,b.color[3]+=b.f[3]*a),p="rgba("+[U(0,255,b.color[0]|0),U(0,255,b.color[1]|0),U(0,255,b.color[2]|0)].join(),b.aa=c.w||p+",0)",b.$=p+","+U(0,1,b.color[3].toFixed(2))+")"):(c.r.splice(d,1),c.T.push(b))})},ga:function(){this.j=!1;this.l=this.elapsedTime=0},L:function(a){ra(this.r,function(b){b.fa(a)})}};c.ca(a,b);return c}function Ib(){return{position:n(0,0),color:[],f:[],fa:function(a){var b=this.size,c=b>>1,f=this.position.x|0,d=this.position.y|
0,c=a.createRadialGradient(f+c,d+c,this.X,f+c,d+c,c);c.addColorStop(0,this.$);c.addColorStop(1,this.aa);a.fillStyle=c;a.fillRect(f,d,b,b)}}}function qb(a,b){return n(a.x+b.x,a.y+b.y)}function Na(a,b){return n(a.x*b,a.y*b)}function n(a,b){return{x:a||0,y:b||0,scale:function(a){this.x*=a;this.y*=a},add:function(a){this.x+=a.x;this.y+=a.y}}}function rb(a){var b=a.canvas.width,c=a.canvas.height,f=Y(b,c);Xa(a,E(f),[-1,0,0,0,0,0,-2,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0]);var d=Xa(a,0,[0,0,0,0,0,0,0,0,0,0,
0,0,3,0,0,0,0,0,-2,0,0,0,0,0,-1]),e=0,m=d.data;D(b*c,function(){D(3,function(){m[e]=255-m[e];e++});e++});var t=Y(b,c);E(t).putImageData(d,0,0);a.globalCompositeOperation="darken";a.drawImage(t,0,0,b,c);a.globalCompositeOperation="lighter";a.drawImage(f,0,0,b,c)}function Xa(a,b,c){var f=Ya(a);a=(b||a).createImageData(f.width,f.height);jb(f,a.data,c);if(!b)return a;b.putImageData(a,0,0)}function jb(a,b,c){var f=ga(Jb(c.length)),d=f/2|0,e=a.data,m=a.width,t=a.height,g=0;X(m,t,function(a,l){var h=0,k=
0,q=0;X(f,f,function(b,g){var r=l+g-d,n=a+b-d,r=r+10*t,r=r%t,n=n+10*m,n=n%m,r=4*(r*m+n),n=c[g*f+b];h+=e[r]*n;k+=e[r+1]*n;q+=e[r+2]*n});b[g++]=h;b[g++]=k;b[g++]=q;b[g++]=255})}function Fb(a,b,c,f,d,e){var m=0,g=0,r=20*d,l=20*e;X(d,e,function(h,k){var n=a[g],q=b[g];g++;n=4*((h-n+r)%d+(k-q+l)%e*d);f[m++]=c[n++];f[m++]=c[n++];f[m++]=c[n++];f[m++]=c[n]})}function wa(a,b){var c=Ya(a),f=c.data,d=0;D(c.width*c.height,function(){var a=f[d],c=f[d+1],e=f[d+2],a=a/255,c=c/255,e=e/255,g,l,h,k=Math.max(a,c,e),
n=k-Math.min(a,c,e);0==n?a=h=0:(h=n/k,g=(k-a)/6/n+.5,l=(k-c)/6/n+.5,e=(k-e)/6/n+.5,a=a===k?e-l:c===k?1/3+g-e:2/3+l-g,0>a?a++:1<a&&a--);h=b({q:a,t:h,b:k});f[d++]=h.ea;f[d++]=h.ba;f[d++]=h.Y;d++});a.putImageData(c,0,0)}function va(a,b,c){void 0===b&&(b=a.t,c=a.b,a=a.q);var d=6*a|0,e=6*a-d;a=c*(1-b);var g=c*(1-e*b);b=c*(1-(1-e)*b);var m,h,k;switch(d%6){case 0:m=c;h=b;k=a;break;case 1:m=g;h=c;k=a;break;case 2:m=a;h=c;k=b;break;case 3:m=a;h=g;k=c;break;case 4:m=b;h=a;k=c;break;case 5:m=c,h=a,k=g}return{ea:255*
m|0,ba:255*h|0,Y:255*k|0}}function y(a,b,c,d,e,g,m,h,l,n){function q(u,w){var v=w*a+u;try{return s[v]?s[v]:s[v]=S(n)|0?U(0,255,(S(l)|0)+q((a+u-(k(e,g)|0))%a,(b+w-(k(m,h)|0))%b)):k(c,d)|0}catch(x){return s[v]=k(c,d)|0}}var s=[];return q}function T(a,b,c){Ka.push([a,b,c])}function Va(a,b,c){a=Y(a,b);b=E(a);var d=Ya(b);c(d.data,b,a);b.putImageData(d,0,0);return a}function Ya(a){return a.getImageData(0,0,a.canvas.width,a.canvas.height)}function k(a,b){return a+S(b-a)}function S(a){return xa()*a}function Za(a){return a*
a}function E(a){return a.getContext("2d")}function Y(a,b){var c=G.createElement("canvas");c.width=a||g;c.height=b||q;return c}function X(a,b,c){for(var d=0;d<b;d++)for(var e=0;e<a;e++)c(e,d)}function U(a,b,c){return aa(b,Z(a,c))}function ra(a,b){for(var c=a.length-1;0<=c&&!b(a[c],c);c--);}function D(a,b){for(var c=0;c<a;c++)b(c)}function xa(){var a=2091639*A.O+A.C*A.D;A.O=A.P;A.P=A.F;A.C=a|0;A.F=a-A.C;return A.F}var ya=250,sb=400,la=10,lb=8,e=7,g=1E7,q=0,O=1;/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&
(ya=200,sb=300,la=5,lb=4);for(;(q>innerHeight||g>innerWidth)&&3<e;)e--,O=e/7,g=1715*O|0,q=1400*O|0;var Oa=2048*e,Sa=1E3*e,B=Sa-150,na=[],J=0,F=0,A={W:function(a){a=1>a?1/a:a;this.O=(a>>>0)*this.D;a=69069*a+1>>>0;this.P=a*this.D;this.F=(69069*a+1>>>0)*this.D;this.C=1;return this},O:0,P:0,F:0,C:0,D:2.3283064365386963E-10};A.W(5);var ia=[],ja=[],G=document;G.getElementById("overlay").style.width=g+"px";G.getElementById("overlay").style.left=(-g>>1)+"px";var Kb=G.getElementById("canvas_cont");D(5,function(){var a=
Y();a.style.left=(-g>>1)+"px";Kb.appendChild(a);ia.push(a);ja.push(E(a))});var $a=ja[0],Ra=ja[1],W=ja[2],w=ja[3],u=ja[4],v=Math.abs,aa=Math.min,Z=Math.max,z=Math.sin,ga=Math.round,Jb=Math.sqrt,ba=Math.PI,x=2*ba,Fa=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame;if(!Fa)var tb=0,Fa=function(a){var b=Date.now(),c=Z(0,16-(b-tb));window.setTimeout(function(){a(b+c)},c);tb=b+c};var Ka=[],d={a:n(50*e,900*e),b:n()},Ea=0,h=64*O|0,Lb=Y(2*h,h),ub=E(Lb),ab=new Image;
ab.onload=function(){ub.drawImage(ab,0,0,2*h,h);Ea=Y(2*h,h);var a=E(Ea),b=ub.getImageData(0,0,2*h,h).data,c=a.createImageData(2*h,h),d=c.data,e=0;X(2*h,h,function(){d[e]=b[e];e++;d[e]=b[e];e++;d[e]=b[e]/2;e++;d[e]=b[e];e++});a.putImageData(c,0,0)};ab.src="./man.gif";var eb=0,H={};G.addEventListener("keydown",pb);G.addEventListener("keyup",pb);G.body.addEventListener("touchmove",function(a){a.preventDefault()},!1);var gb=0,fb=0;ia[ia.length-1].addEventListener("mousemove",function(a){var b=ia[1].getBoundingClientRect();
gb=a.clientX-b.left;fb=a.clientY-b.top},!1);ia[ia.length-1].addEventListener("onmousedown",function(){});var vb;T("Painting Sky",5,function(){vb=Va(ya,q,function(a){var b=0;D(ya,function(){a[b++]=40;a[b++]=50;a[b++]=80;a[b++]=255});var c=210/q,d=4*ya;X(ya,q-1,function(){a[b]=(a[b-4]+a[b-d]+(S(2)|0)>>1)+(xa()<c?S(2)|0:0);b++;a[b]=(a[b-4]+a[b-d]+(S(2)|0)>>1)+(xa()<c?S(2)|0:0);b++;a[b]=(a[b-4]+a[b-d]+(S(2)|0)>>1)+(xa()<c?S(2)|0:0);b++;a[b++]=255})});$a.fillStyle=$a.createPattern(vb,"repeat-x");$a.fillRect(0,
0,g,q);ha()});var l=sb,Ia,wb,xb,za,Ja,yb,zb,Ab,Bb,Aa;T("Chiseling rocks",10,function(){function a(a,b){return function(c,d){return Z(b,a(c,d))}}Ia=ua(y(l,l,120,180,-3,3,-3,3,-1,200),y(l,l,70,130,-3,3,-3,3,-1,100),y(l,l,40,80,-3,3,-3,3,-2,100));var b=ua(y(l,l,60,180,-1,2,1,3,-2,100),y(l,l,70,220,-1,2,1,3,-1,200),y(l,l,70,100,-1,2,1,3,-3,100)),c=ua(a(y(l,l,60,110,1,3,-3,0,-4,100),20),a(y(l,l,80,160,1,3,-3,0,-2,500),30),a(y(l,l,20,40,1,3,-3,0,4,1E3),80));wb=W.createPattern(b,"repeat");wa(E(b),function(a){return va(a.q,
a.t/4,.4*a.b)});xb=W.createPattern(b,"repeat");wa(E(c),function(a){return va(a.q,.1*a.t,U(.75,1,1.1*a.b))});zb=W.createPattern(c,"repeat");ha()});T("Chiseling rocks",10,function(){Ja=ua(y(l+7,l+7,80,140,-2,4,-2,4,2,300),y(l+7,l+7,80,140,-2,4,-2,4,-1,300),y(l+7,l+7,40,80,-2,4,-2,4,-2,300));var a=ua(y(l,l,30,50,1,4,1,4,5,100),y(l,l,120,180,1,4,1,4,-2,200),y(l,l,150,220,1,4,1,4,-2,200));za=E(Ja);Aa=E(Ia);var b=E(a);wa(b,function(a){return va(a.q,.3*a.t,.5*a.b)});ra([za,Aa,b],function(a){Xa(a,a,[.1,.1,
.1,.1,.2,.1,.1,.1,.1])});Ab=W.createPattern(a,"repeat");ha()});T("Chiseling rocks",10,function(){rb(za);wa(za,function(a){return va(a.q,.3*a.t,.5*a.b)});rb(Aa);wa(Aa,Hb());Bb=W.createPattern(Ia,"repeat");yb=W.createPattern(Ja,"repeat");Ia=Ja=za=Aa=0;ha()});var Ga,K=g+400,L=q+400,R=[],$=0,Ua=[],oa=[];T("Digging Caves",10,function(){A.W(1);var a=Y(2048,1E3),b=E(a);b.fillStyle="rgba(0,0,0,0)";b.fillRect(0,0,2048,1E3);b.shadowColor="#400000";b.shadowBlur=0;b.shadowOffsetX=0;b.shadowOffsetY=-14;b.fillStyle=
"#600000";var c=[];c[2048]=0;(function(a,b,c){var d=a.length-1;c=Math.pow(2,-c);b*=c;var e=d/2;for(a[0]=a[d]=0;e;){for(var f=e;f<d;f+=2*e)a[f]=b*k(.2,1)+(a[f-e]+a[f+e])/2;b*=c;e>>=1}})(c,1500,.7);b.beginPath();b.lineTo(0,1E3);D(2048,function(a){c[a]+=400*Za(z(2*x*a/2048))*Za(z(ba+3*x*a/2048));c[a]*=1/(1+Za(.001*(a-1024)));b.lineTo(a,1E3-c[a])});b.lineTo(2049,1E3);b.closePath();b.fill();b.clip();b.shadowOffsetY=3;b.lineWidth=22;b.shadowColor="#800000";b.beginPath();b.strokeStyle="#a00000";b.moveTo(0,
600);b.lineTo(2048,900);b.moveTo(0,900);b.lineTo(2048,600);b.moveTo(204.8,0);b.lineTo(1433.6,810);b.moveTo(1843.2,0);b.lineTo(614.4,810);b.stroke();b.beginPath();b.fillStyle="#a00000";b.arc(204.8,750,30,0,x);b.arc(1843.2,750,30,0,x);b.fill();Ga=new Uint8Array(2048E3);var d=b.getImageData(0,0,2048,1E3).data,e=0,g=0;X(2048,1E3,function(a,b){var h=d[e+=4]>>5,k=b/1E3;.4>k&&(h==Pa||h==Wa)&&b<1E3-c[a]+100*(.4-k)&&(h=ta);Ga[g++]=h})});D(2,function(){var a=Y(K,L);Ua.push(a);oa.push(a.getContext("2d"))});
D(80,function(){R.push(k(-(e>>1),1+(e>>1))|0)});var nb={},Q=1E7,V=1E7,pa=-1E7,qa=-1E7,ca=0,Pa=2,Wa=3,Gb=4,sa=6,ta=7;T("Digging Caves",10,function(){nb=[0,xb,wb,yb,Ab,Bb,"#333",zb];ha()});var da=1E7,ea=0,N;D(la-na.length,function(){T("Waving waves",3,function(){na.length<la&&ha()})});T("Waving waves",1,function(){N=null});u.strokeStyle="rgba(200,200,250,0.3)";u.lineWidth=3;var kb=10,s=[];D(g/kb+1,function(){s.push({height:B,d:0})});u.globalAlpha=.9;var ka=0,hb,ma=Ha(350,{position:n(),g:90,H:10,duration:-1,
h:[200,45,10,0],m:[40,40,40,0],p:n(0,.03),A:1,J:0,s:n(4,6),e:12,M:12,size:30*O|0,i:75*O|0,w:"rgba(40,20,10,0)",B:4,speed:4,N:1,k:140,n:[220,188,88,1],o:[32,35,38,0],S:function(a){if(a.position.y>B){if(a.c=0,Da.G(a.position.x,a.position.y)&&(a=s[s.length*(1-(a.position.x-J)/g)|0+(k(-1,2)|0)]))a.d+=1}else{var b=Ba(a.position.x/e|0,a.position.y/e|0);if(b==Pa||b==ta)a.c=0,Da.G(a.position.x,a.position.y),b==ta?(P.speed=3,P.G(a.position.x,a.position.y),ob(a.position.x/e|0,a.position.y/e|0,ca)):ob(a.position.x/
e|0,a.position.y/e|0,.8>xa()?1:ca);else if(b==sa||b==Wa||b==ta)a.direction.y*=-1}},u:function(){return d.U?1.5:0},v:.1}),Qa=Ha(450,{j:!0,position:n(Oa/2,-200),g:90,H:180,duration:-1,h:[240,240,250,.1],m:[10,10,10,0],p:n(0,.01),A:15,J:0,s:n(g/2,100),e:12,M:12,size:20*O|0,i:10*O|0,B:2,w:"rgba(40,40,40,0)",speed:.2,N:.1,n:[220,220,230,1],o:[22,22,22,0],u:function(){return 1.5+2.25*z(1E-4*Ma)},v:.4}),Da=Ha(250,{j:!1,position:n(),g:-90,H:20,duration:10,h:[40,40,40,0],m:[10,10,10,0],p:n(0,-.25),A:.8,J:.2,
s:n(2,2),e:12,M:12,size:45*O|0,i:60*O|0,B:6,w:"transparent",speed:1,N:0,n:[220,220,220,1],o:[22,22,22,0],u:ib,v:.8}),P=Ha(250,{j:!1,position:n(),g:-90,H:80,duration:.15,h:[40,70,140,.2],m:[10,10,10,0],p:n(0,.5),A:1.2,J:.2,s:n(16,4),e:72,M:12,size:14,i:8,B:1,k:100,speed:2,w:"rgba(140,140,255,0)",N:.5,n:[60,80,120,.9],o:[12,12,12,0],S:function(a){a.position.y>B&&0<a.direction.y&&(a.c=0)},u:ib,v:.05}),Ma=0,La=0;T("Ready!",10,function(){G.getElementById("overlay").style.display="none";Fa(cb)});bb()})();
